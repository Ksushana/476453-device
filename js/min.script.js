var ESC = 27; var contactsOpenButton = document.querySelector(".contacts--button"); var contactsForm = document.querySelector(".overlay-write"); var popUp = document.querySelector(".pop-up"); var close = document.querySelector(".pop-up-close"); var overlay = document.querySelector(".fixed-overlay"); var form = contactsForm.querySelector(".pop-up__form"); var isStorageSupport = true; var storage = ""; try { storage = localStorage.getItem("name") } catch (err) { isStorageSupport = false } contactsOpenButton.addEventListener("click", function (a) { a.preventDefault(); contactsForm.classList.add("modal-show"); var c = contactsForm.querySelector("[name=user-name]"); var b = contactsForm.querySelector("[name=e-mail]"); if (storage) { c.value = storage; b.focus() } else { c.focus() } }); close.addEventListener("click", function (a) { a.preventDefault(); contactsForm.classList.remove("modal-show") }); form.addEventListener("submit", function (a) { var c = contactsForm.querySelector("[name=user-name]"); var b = contactsForm.querySelector("[name=e-mail]"); if (!c.value || !b.value) { a.preventDefault(); if (!c.value) { c.classList.remove("input-error"); contactsForm.offsetWidth = contactsForm.offsetWidth; c.classList.add("input-error") } if (!b.value) { b.classList.remove("input-error"); contactsForm.offsetWidth = contactsForm.offsetWidth; b.classList.add("input-error") } } else { if (isStorageSupport) { localStorage.setItem("name", c.value) } } }); window.addEventListener("keydown", function (a) { if (a.keyCode === ESC) { if (contactsForm.classList.contains("modal-show")) { a.preventDefault(); contactsForm.classList.remove("modal-show") } } }); overlay.addEventListener("click", function (a) { if (a.target === overlay) { contactsForm.classList.remove("modal-show") } }); var map = document.querySelector(".map-open"); var bigMap = document.querySelector(".overlay-map"); var mapCloseButton = document.querySelector(".map-close"); map.addEventListener("click", function (a) { a.preventDefault(); bigMap.classList.add("modal-show") }); mapCloseButton.addEventListener("click", function (a) { a.preventDefault(); bigMap.classList.remove("modal-show") }); window.addEventListener("keydown", function (a) { if (a.keyCode === ESC) { if (bigMap.classList.contains("modal-show")) { a.preventDefault(); bigMap.classList.remove("modal-show") } } }); bigMap.addEventListener("click", function (a) { if (a.target === bigMap) { bigMap.classList.remove("modal-show") } }); var sliderControls = document.querySelector(".slider-controls"); var sliderNodes = Array.prototype.slice.call(sliderControls.children); var slides = document.querySelectorAll(".slider-slide"); var changeSlide = function (c) { for (var b = 0; b < slides.length; b++) { var a = slides[b]; a.classList.add("visually-hidden") } var d = slides[c]; d.classList.remove("visually-hidden") }; var sliderButtons = document.querySelectorAll(".slider-control"); for (var i = 0; i < sliderButtons.length; i++) { var sliderButton = sliderButtons[i]; sliderButton.addEventListener("click", function (a) { var c = a.target; var b = sliderNodes.indexOf(c); changeSlide(b) }) } var smallSliderControls = document.querySelector(".small-slider-controls"); var smallSliderNodes = Array.prototype.slice.call(smallSliderControls.children); var smallSlides = document.querySelectorAll(".services--info"); var smallSliderButtons = document.querySelectorAll(".small-slider-control"); var changeSmallSlide = function (d) { for (var c = 0; c < smallSlides.length; c++) { var a = smallSlides[c]; a.classList.add("visually-hidden"); var b = smallSliderButtons[c]; b.classList.remove("small-slider-control__active") } var e = smallSlides[d]; e.classList.remove("visually-hidden") }; var onSlideCLick = function (a) { var c = a.target; var b = smallSliderNodes.indexOf(c); changeSmallSlide(b); c.classList.add("small-slider-control__active") }; for (var i = 0; i < smallSliderButtons.length; i++) { var smallSliderButton = smallSliderButtons[i]; smallSliderButton.addEventListener("click", onSlideCLick) };